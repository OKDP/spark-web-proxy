# -- Desired number of okdp-server pods to run.
replicaCount: 1

image:
  # -- Docker image registry.
  repository: quay.io/okdp/spark-history-web-proxy
  # -- Image pull policy.
  pullPolicy: Always
  # -- Image tag.
  tag: "0.1.0-snapshot"

# -- Secrets to be used for pulling images from private Docker registries.
imagePullSecrets: []
# -- Override for the `okdp-server.fullname` template, maintains the release name.
nameOverride: ""
# -- Overrides the release name.
fullnameOverride: ""

configuration:
  proxy:
    # -- Specify the Proxy listen address.
    listenAddress: 0.0.0.0
    # -- Specify the Proxy listen port.
    port: 4040
    # -- Specify the Server Mode. One of `debug`, `release` or `test`.
    mode: debug

  spark:
    history:
      # -- Specify the Spark History listen address scheme.
      scheme: http
      # -- Specify the Spark History listen kubernetes service name.
      service:
      # -- Specify the Spark History listen kubernetes service port.
      # -- Same as spark.history.ui.port
      port: 18080
    ui:
      # -- Specify the Spark UI listen port.
      # -- Same as spark.ui.port
      port: 4040
      # -- Specify the base path for the Spark UI proxy.
      # -- When the proxyBase is set to /proxy, enable the property `spark.ui.reverseProxy=true` in your Spark job configuration.
      # -- When the proxyBase is set to a value other than `/proxy`, disable the property `spark.ui.reverseProxy=false` in your Spark job configuration if already set.
      proxyBase: /sparkui
    # -- List of namespaces where the spark jobs run.
    # If empty, all namespaces will be allowed.
    jobNamespaces:
    - default

  logging:
    # debug, info, warn, error, fatal, panic
    level: "debug"
    # console or json
    format: "console"

  security:
    cors:
      # -- Specify the allowed origins for cross-origin requests. "*" allows all origins.
      allowedOrigins: ["*"]
      # -- Define the HTTP methods permitted for CORS requests.
      allowedMethods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS", "HEAD"]
      # -- List the headers that clients are allowed to include in requests.
      allowedHeaders: ["Origin", "Accept", "Authorization", "Content-Length", "Content-Type"]
      # -- Specify which response headers should be exposed to the client.
      exposedHeaders: ["Content-Length"]
      # -- Determine whether cookies and authentication credentials should be included in cross-origin requests.
      allowCredentials: false 
      # -- Define how long (in seconds) the results of a preflight request can be cached by the client.
      maxAge: 3600
    headers: {}
    
serviceAccount:
  # -- Specify whether a service account should be created
  create: true
  # -- Automatically mount a ServiceAccount's API credentials?
  automount: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # -- If not set and create is true, a name is generated using the fullname template
  name: ""

rbac:
  # -- Specify whether a RBAC should be created
  create: true
  # -- Specify annotations for the proxy.
  annotations: {}

# -- Additional annotations for the okdp-server pod.
podAnnotations: {}
# -- Additional labels for the okdp-server pod.
podLabels: {}

podSecurityContext: {}
  # fsGroup: 2000

# -- Security context for the container.
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 4040

# Ingress configuration for external access.
ingress:
  enabled: false
  # -- Specify the ingress class (Kubernetes >= 1.18).
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- Liveness probe for the okdp-server container.
livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 60
  periodSeconds: 30
  timeoutSeconds: 10
# -- Readiness probe for the okdp-server container.
readinessProbe:
  httpGet:
    path: /readiness
    port: http

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Additional volumes on the output Deployment definition.
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# -- Additional volumeMounts on the output Deployment definition.
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

# -- Node selector for pod scheduling.
nodeSelector: {}

# -- Tolerations for pod scheduling.
tolerations: []

# -- Affinity for pod scheduling.
affinity: {}

